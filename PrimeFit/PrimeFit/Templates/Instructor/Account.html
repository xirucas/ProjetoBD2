{% extends 'base/base.html' %}

{% block title %}Minha Conta - Instrutor{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Minha Conta</h1>
</div>

<!-- Informações do Instrutor -->
<div class="row mb-4"> 
    <div>
        <div class="card">
            <div class="card-header">
                <h5>Informações Pessoais</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Nome Completo:</strong> {{ instructor_info.name }}</p>
                        <p><strong>Email:</strong> {{ instructor_info.email }}</p>
                        <p><strong>Telefone:</strong> {{ instructor_info.phone }}</p>
                        <p><strong>Data de Admissão:</strong> {{ instructor_info.hired_at | date:"d/m/Y" }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Estatísticas do Instrutor -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card bg-primary text-white">
            <div class="card-body">
                <h5>Aulas este Mês</h5>
                <h2>{{ monthly_info.classes_month|default:0 }}</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-success text-white">
            <div class="card-body">
                <h5>Alunos Atendidos</h5>
                <h2>{{ monthly_info.students_month|default:0 }}</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-warning text-white">
            <div class="card-body">
                <h5>Avaliação Média</h5>
                <h2>4.8</h2>
                <small>⭐⭐⭐⭐⭐</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-info text-white">
            <div class="card-body">
                <h5>Horas Trabalhadas</h5>
                <h2>{{ monthly_info.hours_month|default:0|floatformat:0 }}h</h2>
            </div>
        </div>
    </div>
</div>

<!-- Horário da Semana -->
<div class="card mb-4">
    <div class="card-header">
        <h5>Meu Horário - Semana Atual</h5>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Horário</th>
                        <th>Segunda</th>
                        <th>Terça</th>
                        <th>Quarta</th>
                        <th>Quinta</th>
                        <th>Sexta</th>
                        <th>Sábado</th>
                    </tr>
                </thead>
                <tbody>
                    {% for time_slot, days in schedule_grid.items %}
                    <tr>
                        <td><strong>{{ time_slot }}</strong></td>
                        <!-- Segunda (day_of_week = 1) -->
                        <td>
                            {% if 1 in days %}
                                <span class="bg-warning rounded p-2 d-block">
                                    {{ days.1.name }}<br>
                                    <small>{{ days.1.room }} ({{ days.1.current }}/{{ days.1.max }})</small>
                                </span>
                            {% endif %}
                        </td>
                        <!-- Terça (day_of_week = 2) -->
                        <td>
                            {% if 2 in days %}
                                <span class="bg-primary rounded p-2 d-block text-white">
                                    {{ days.2.name }}<br>
                                    <small>{{ days.2.room }} ({{ days.2.current }}/{{ days.2.max }})</small>
                                </span>
                            {% endif %}
                        </td>
                        <!-- Quarta (day_of_week = 3) -->
                        <td>
                            {% if 3 in days %}
                                <span class="bg-warning rounded p-2 d-block">
                                    {{ days.3.name }}<br>
                                    <small>{{ days.3.room }} ({{ days.3.current }}/{{ days.3.max }})</small>
                                </span>
                            {% endif %}
                        </td>
                        <!-- Quinta (day_of_week = 4) -->
                        <td>
                            {% if 4 in days %}
                                <span class="bg-primary rounded p-2 d-block text-white">
                                    {{ days.4.name }}<br>
                                    <small>{{ days.4.room }} ({{ days.4.current }}/{{ days.4.max }})</small>
                                </span>
                            {% endif %}
                        </td>
                        <!-- Sexta (day_of_week = 5) -->
                        <td>
                            {% if 5 in days %}
                                <span class="bg-warning rounded p-2 d-block">
                                    {{ days.5.name }}<br>
                                    <small>{{ days.5.room }} ({{ days.5.current }}/{{ days.5.max }})</small>
                                </span>
                            {% endif %}
                        </td>
                        <!-- Sábado (day_of_week = 6) -->
                        <td>
                            {% if 6 in days %}
                                <span class="bg-info rounded p-2 d-block text-white">
                                    {{ days.6.name }}<br>
                                    <small>{{ days.6.room }} ({{ days.6.current }}/{{ days.6.max }})</small>
                                </span>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" class="text-center text-muted">Nenhuma aula agendada para esta semana</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Avaliações Recentes -->
<div class="card mb-4">
    <div class="card-header">
        <h5>Avaliações Recentes dos Alunos</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <div class="border rounded p-3 mb-3">
                    <div class="d-flex justify-content-between">
                        <strong>Maria Santos</strong>
                        <span class="text-warning">⭐⭐⭐⭐⭐</span>
                    </div>
                    <small class="text-muted">Aula de Yoga - 28/10/2024</small>
                    <p class="mt-2">"Excelente aula! A Ana tem uma energia incrível e consegue transmitir muita calma e foco."</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="border rounded p-3 mb-3">
                    <div class="d-flex justify-content-between">
                        <strong>João Silva</strong>
                        <span class="text-warning">⭐⭐⭐⭐⭐</span>
                    </div>
                    <small class="text-muted">Aula de Pilates - 26/10/2024</small>
                    <p class="mt-2">"Primeira vez no Pilates e adorei! A Ana explica muito bem os exercícios."</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="border rounded p-3 mb-3">
                    <div class="d-flex justify-content-between">
                        <strong>Rita Costa</strong>
                        <span class="text-warning">⭐⭐⭐⭐⭐</span>
                    </div>
                    <small class="text-muted">Aula de Zumba - 25/10/2024</small>
                    <p class="mt-2">"Que energia! Sempre saio das aulas da Ana com um sorriso no rosto."</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="border rounded p-3 mb-3">
                    <div class="d-flex justify-content-between">
                        <strong>Carlos Mendes</strong>
                        <span class="text-warning">⭐⭐⭐⭐⭐</span>
                    </div>
                    <small class="text-muted">Aula de Yoga - 24/10/2024</small>
                    <p class="mt-2">"Técnica perfeita e muito paciente com iniciantes. Recomendo!"</p>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
